import{b as U,c as C,_ as I,a as T}from"./BasePage-aJlR_RJI.js";import{_ as D,b as q,S as Y,u as H,a as J,O as K}from"./index-DruWBKkm.js";import{_ as R}from"./UInput.vue_vue_type_script_setup_true_lang-BjaSJgmr.js";import{_ as Q}from"./UToggle.vue_vue_type_script_setup_true_lang-BXyNT88P.js";import{_ as B}from"./UAlert.vue_vue_type_script_setup_true_lang-DIQ9zHdR.js";import{_ as X}from"./UModal.vue_vue_type_script_setup_true_lang-BZiZVfQx.js";import{m as Z,f as x,h as p,o as u,w as t,a as o,v as ee,z as V,r as _,j as le,g as b,L as S,ag as k,k as ae,c as oe,u as w,F as ne,b as te}from"./index-CdEV5Lsj.js";import{w as se}from"./wrench-BOnrtR8c.js";import"./ULabel.vue_vue_type_script_setup_true_lang-DmdMPZfT.js";import"./UDivider.vue_vue_type_script_setup_true_lang-CBOjoWJ-.js";const re=""+new URL("cpanel-4a_hkhUf.svg",import.meta.url).href,ie=""+new URL("directadmin-BxFOqSAs.svg",import.meta.url).href,de=""+new URL("plesk-CWmglDV2.svg",import.meta.url).href,me={__name:"ConnectionModal",props:Z({data:{type:Object,default:()=>{}}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const i=x(s,"modelValue");return(a,m)=>{const d=R,v=D,c=C,f=U,e=X;return u(),p(e,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=g=>i.value=g),title:a.$t("title.serverDetails"),description:a.$t("description.serverDetails"),size:"xs","click-to-close":"","esc-to-close":"","close-button":!1},{default:t(()=>[o(f,{gap:"xl"},{default:t(()=>[o(d,{"model-value":s.data.serverName,"label-align":"topWithDesc",label:a.$t("label.serverName"),description:a.$t("description.serverName"),readonly:""},null,8,["model-value","label","description"]),o(d,{"model-value":s.data.primaryIp,"label-align":"topWithDesc",label:a.$t("label.primaryIp"),description:a.$t("description.primaryIp"),readonly:""},null,8,["model-value","label","description"]),o(d,{"model-value":s.data.primaryNameserver,"label-align":"topWithDesc",label:a.$t("label.primaryNameserver"),readonly:""},null,8,["model-value","label"]),o(d,{"model-value":s.data.secondaryNameserver,"label-align":"topWithDesc",label:a.$t("label.secondaryNameserver"),readonly:""},null,8,["model-value","label"]),o(c,{justify:"center"},{default:t(()=>[o(v,{label:a.$t("global.close"),underlined:"",onClick:m[0]||(m[0]=g=>i.value=!i.value)},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue","title","description"])}}},ue={__name:"ConnectionAlert",props:{verified:{type:Boolean,required:!1}},setup(s){return(i,a)=>{const m=q,d=I,v=C,c=U,f=B;return u(),p(f,{class:"py-5",color:s.verified?"green":"red",variant:"thirdary"},{default:t(()=>[o(c,{gap:"sm",align:"center"},{default:t(()=>[o(c,{gap:"xs",align:"center"},{default:t(()=>[o(v,{gap:"xs","no-mobile":"",class:"justify-center"},{default:t(()=>[o(m,{name:s.verified?"check-circle-fill":"exclamation-circle-fill",color:s.verified?"green":"red"},null,8,["name","color"]),o(d,{size:"lg",class:"font-semibold text-gray-900",html:s.verified?i.$t("title.connectionVerified"):i.$t("error.connection")},null,8,["html"])]),_:1}),s.verified?V("",!0):(u(),p(d,{key:0,class:"text-gray-900",html:i.$t("description.connectionError")},null,8,["html"]))]),_:1}),ee(i.$slots,"default")]),_:3})]),_:3},8,["color"])}}},ce=["src","alt"],ye={__name:"Page",setup(s){const i=Object.values(Y).map(l=>({value:l,label:l,image:new URL(Object.assign({"./assets/images/cpanel.svg":re,"./assets/images/directadmin.svg":ie,"./assets/images/plesk.svg":de})[`./assets/images/${l}.svg`],import.meta.url).href})),a=H(),m=_(!1),d=_(!1),v=_(!1),c=_(!1),f=_({}),e=le({module:null,serverId:null,hostname:"",username:"",password:""}),g=b(()=>!!(e.module&&e.hostname&&e.username)),h=b(()=>a.server.isConnectionVerified),N=b(()=>$.value?!1:!g.value||!h.value||!c.value),$=b(()=>a.server.servers.cpanel.hostname||a.server.servers.plesk.hostname||a.server.servers.directadmin.hostname),M=b(()=>({rightSlot:"border-none hover:border-none bg-transparent",passwordIconWrapper:h.value?"hidden":""}));S(()=>e.module,()=>{const l=a.server.servers[e.module];l&&(e.serverId=l.serverId,e.hostname=l.hostname,e.username=l.username,e.password=l.password,v.value=!1,a.server.isConnectionVerified=!!l.password)}),S(e,()=>{c.value=k(f.value)===k(e)}),ae(async()=>{!!a.server.servers.cpanel.serverId||await a.getServers();const n=a.server.servers[e.module];n&&(e.serverId=n.serverId,e.hostname=n.hostname,e.username=n.username,e.password=n.password)});function E(){m.value=!0}async function L(){if(g.value){d.value=!0;try{await a.verifyServer(e),a.server.isConnectionVerified=!0,f.value={...e},c.value=!0}catch{a.server.isConnectionVerified=!1}finally{v.value=!0,d.value=!1}}}async function O(l){try{$.value||await a.createServer(e),l()}catch{a.server.isConnectionVerified=!1}}return(l,n)=>{const F=I,j=B,A=Q,y=R,G=J,W=C,z=D,P=U;return u(),p(T,{group:l.$t("group.hosting"),"group-step":w(K)*5,title:l.$t("title.hosting"),description:l.$t("description.controlPanel"),"prevent-next":N.value,prev:{name:"GettingStarted/Domains/Step7"},next:{name:"GettingStarted/MarketConnect/Step1"},skip:$.value?null:{name:"GettingStarted/MarketConnect/Step1"},onContinue:O},{default:t(()=>[$.value?(u(),p(j,{key:0,color:"green"},{description:t(()=>[o(F,{align:"center",html:l.$t("description.firstServerConnected",{wrenchIcon:w(se)})},null,8,["html"])]),_:1})):(u(),oe(ne,{key:1},[o(A,{modelValue:e.module,"onUpdate:modelValue":n[0]||(n[0]=r=>e.module=r),name:"toggle",size:"xl",options:w(i),split:"",block:""},{option:t(({option:r})=>[te("img",{src:r.image,alt:r.value,class:"py-1"},null,8,ce)]),_:1},8,["modelValue","options"]),e.module?(u(),p(P,{key:0},{default:t(()=>[o(y,{modelValue:e.hostname,"onUpdate:modelValue":n[1]||(n[1]=r=>e.hostname=r),label:l.$t("label.hostnameIp"),placeholder:l.$t("placeholder.hostnameIp")},null,8,["modelValue","label","placeholder"]),o(y,{modelValue:e.username,"onUpdate:modelValue":n[2]||(n[2]=r=>e.username=r),label:l.$t("label.username"),placeholder:l.$t("placeholder.hostingUsername")},null,8,["modelValue","label","placeholder"]),o(W,{align:"end","no-mobile":""},{default:t(()=>[o(y,{modelValue:e.password,"onUpdate:modelValue":n[3]||(n[3]=r=>e.password=r),label:l.$t("label.password"),placeholder:l.$t("placeholder.password"),type:"password",config:M.value},null,8,["modelValue","label","placeholder","config"]),o(G,{label:l.$t("label.testConnection"),disabled:!g.value,loading:d.value,size:"sm",class:"relative leading-snug min-w-[8.625rem]",onClick:L},null,8,["label","disabled","loading"])]),_:1}),v.value?(u(),p(ue,{key:0,verified:h.value},{default:t(()=>[h.value?(u(),p(z,{key:0,underlined:"",color:"grayscale",class:"mb-1.5",label:l.$t("label.viewDetails"),onClick:E},null,8,["label"])):V("",!0),o(me,{modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=r=>m.value=r),data:w(a).server.details},null,8,["modelValue","data"])]),_:1},8,["verified"])):V("",!0)]),_:1})):V("",!0)],64))]),_:1},8,["group","group-step","title","description","prevent-next","skip"])}}};export{ye as default};
